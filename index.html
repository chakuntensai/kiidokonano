<script>
  const keyMap = {
    // è¨˜å·ã‚­ãƒ¼ï¼ˆçœç•¥ã›ãšãã®ã¾ã¾æ®‹ã™ï¼‰
    "ï¼": { key: "1", shift: true },
    "ï¼Ÿ": { key: "/", shift: true },
    "ã€": { key: "ã­", shift: false },
    "ã€‚": { key: "ã‚‹", shift: false },
    "ã€Œ": { key: "ã‚Œ", shift: false },
    "ã€": { key: "ã‘", shift: false },
    "ï¼ ": { key: "2", shift: true },
    "ï¼ƒ": { key: "3", shift: true },
    "ï¼„": { key: "4", shift: true },
    "ï¼…": { key: "5", shift: true },
    "ï¼¾": { key: "6", shift: true },
    "ï¼†": { key: "7", shift: true },
    "ï¼Š": { key: "8", shift: true },
    "ï¼ˆ": { key: "9", shift: true },
    "ï¼‰": { key: "0", shift: true },
    "â€": { key: "2", shift: true },
    '"': { key: "2", shift: true },
    "'": { key: "7", shift: false },
    "ãƒ¼": { key: "-", shift: false },
    "ï¼": { key: "ã»", shift: false },
    "ï¼‹": { key: "ã»", shift: true },
    "ã€œ": { key: "ã¸", shift: true },
    ":": { key: "ã‚Œ", shift: true },
    "ï¼›": { key: "ã‚Œ", shift: false },
    "_": { key: "ã‚", shift: true },
    "\\": { key: "ã‚€", shift: false },
    "|": { key: "ã‚€", shift: true },
    "[": { key: "ã€Œ", shift: false },
    "]": { key: "ã€", shift: false },
    "{": { key: "ã€Œ", shift: true },
    "}": { key: "ã€", shift: true },
    "<": { key: "ã­", shift: true },
    ">": { key: "ã‚", shift: true },
    "ï¿¥": { key: "ã‚€", shift: false },
    "ãƒ»": { key: "ã‚", shift: false },

    // æ©Ÿèƒ½ã‚­ãƒ¼ï¼ˆè‹±èªåã‚‚å¯¾å¿œï¼‰
    "home": { key: "â†", fn: true },
    "end": { key: "â†’", fn: true },
    "pageup": { key: "â†‘", fn: true },
    "pagedown": { key: "â†“", fn: true },
    "insert": { key: "ã‚", fn: true },
    "delete": { key: "Backspace", fn: true },
    "capslock": { key: "Caps Lock", fn: false },
    "ç„¡å¤‰æ›": { key: "ç„¡å¤‰æ›", fn: false },
    "å¤‰æ›": { key: "å¤‰æ›", fn: false },
    "åŠè§’/å…¨è§’": { key: "åŠè§’/å…¨è§’", fn: false },
  };

  // ç‰¹æ®Šã‚±ãƒ¼ã‚¹ï¼ˆã‚­ãƒ¼ã«ç›´æ¥å¯¾å¿œã—ãªã„ä¾¿åˆ©æ©Ÿèƒ½ï¼‰
  const specialMap = {
    "emoji": true,
    "çµµæ–‡å­—": true,
    "ãˆã‚‚ã˜": true
  };

  function normalizeInput(str) {
    return str
      .toLowerCase()
      .replace(/\s+/g, "")
      .replace(/[ï¼¡-ï¼ºï½-ï½šï¼-ï¼™]/g, s =>
        String.fromCharCode(s.charCodeAt(0) - 0xFEE0)
      );
  }

  const searchInput = document.getElementById("search");
  const result = document.getElementById("result");

  searchInput.addEventListener("input", () => {
    const inputValue = searchInput.value.trim();
    const normalized = normalizeInput(inputValue);

    // çµµæ–‡å­—æ©Ÿèƒ½å¯¾å¿œ
    if (specialMap[normalized]) {
      result.innerHTML = `
        <div class="key-info">
          ğŸ‰ <strong>çµµæ–‡å­—</strong>ã¯ <span class="key">Windows</span> + <span class="key">.</span> ã§å‘¼ã³å‡ºã›ã¾ã™ï¼
        </div>
      `;
      return;
    }

    if (normalized in keyMap) {
      const info = keyMap[normalized];
      const parts = [];

      if (info.shift) parts.push('<span class="key shift">Shift</span>');
      if (info.fn) parts.push('<span class="key fn">Fn</span>');
      parts.push(`<span class="key">${info.key}</span>`);

      result.innerHTML = `
        <div class="key-info">ã€Œ${inputValue}ã€ã¯ ${parts.join(" + ")} ã®ã‚­ãƒ¼ã«ã‚ã‚Šã¾ã™ã€‚</div>
      `;
    } else {
      result.innerHTML = "<div class='key-info'>ãã®ã‚­ãƒ¼ã¯ã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</div>";
    }
  });
</script>
